# Coro_infection_2.0__in_Denmark
English version will be uploaded soon.


模型假设：  
[1].根据‘柳叶刀’论文，假设平均每个感染者周期为8天,其中3天(T_delay)产病毒不传染 + 5天(T_infect)传染。感染者感染后8天住院丧失感染性。  
[2].零号感染者假定为1人。传播按每人每天接触50人，20% 近距离说话，15%传染给近距离讲话的人。通过以上数据，可以计算感染因子q。
  
模型原理：  
该模型意在实现传染病模型的纯数学模型。模型载体为几何级数, 通过使用高等代数和递归算法推导出本算法最关键的'weight_calculated'vector. 由于缺少准确数据，所以该模型预测无法使用ML/DL。
  
模型功能：  
可预测从2020-02-24第一例丹麦感染病患，到现在(NOW)，没有太大政府管控时，病毒的传播效率。可以通过调整line_29的'NOW'来更新日子，从而得到相应的感染人数预测。（讲实话，我觉得让丹麦政府封城啥的真的是做梦，民主自由，怎么可能？？？所以讲道理这模型你可能可以一直用...  :P）

模型orientation:  
代码的 line_38-43行 为本模型超参数。  
[1].多少个patient_zero  （__variable_0__）   
[2].您一天能见到多少个活人 （__variable_1__）  
[3].您有多大几率跟他们近距离说话 （__variable_2__）  
[4].您有多大几率在近距离说话时传染给他们（__variable_3__）  
然后这里update一个认知，有好多老铁在model_1.0时曾经问过我一个灵魂问题，那就是：‘你的模型听起来似乎针对不同国家（人口不同地理因素不同）预测的方式是一样的，这听起来似乎不太科学’。的确，没有解释清楚是我的问题，下面是我的解释：
首先我的patient_zero一般设置的是1-3个人，这种初始条件对于任何国家的总人口来说无异于水滴之余大海。所以在传播初始各个国家的初始条件可以认为是相同的。然后是在传播过程中，这个问题我想聚个例子说明，比如 丹麦和俄罗斯：
众所周知，毛子的领土真tmd是地广人稀，你一天根本可能除了你家人见不到几个新的活人。但是相反的，丹麦cph的人口密度可谓是相当大的,尼玛抢个鞋有时还要挤得头破血流的，所以两个国家根据实际情况 variable_1 会变得很不同。同时，丹麦人高冷，毛子热情，所以 variable_2 （近距离说话的概率）两国又不一样。最后，丹麦人身体好，毛子都tm酒鬼，近距离讲话染病概率 variable_3 也会存在很大不同。综上,国家之间的差异就体现出来了。  
  
代码的 line_67-85行 为本模型核心。该复杂结构意在实现一个针对具有【周期性出现消失的几何级数追踪问题】。该结构也是本模型所用递归算法的体现。可能有的数学还没忘干净的朋友会说：‘几何级数？不就是他妈等比数列，不是很简单么？？？’ 然而我想说，并没有tm这么简单。

首先请打开我留下的图片文件：important_image_1.jpg， 然后重新阅读我的模型假设两遍，接着听我举个例子：  
零号病人出现在第0天，按照上述模型假设，前3天病毒在其体内繁殖，不具有传染性。但是到了第4天，病毒开始传播直到其第8天住院。零号感染者所传播的时间为第4天到第8天结束.我称此轮为第一轮，因为零号感染者感染的人数就是 零号病人的数量*感染因子q。特别是，此时q的指数为1。  
但这时重点来了，细心的朋友可能注意到了，在第7天时，传播的除了零号病人自己本身，第一轮的被感染者也开始传播病毒感染别人了。这种复杂的情况在后期随着天数增加愈演愈烈！如果你观察图片，看到我画紫色线的地方，你会发现，在第15天时，第二轮感染刚刚结束，第三轮感染在进行中，而第四轮感染已经开始了。图中写的q的系数，是当时推导递推规律时留下的。可以看出，想要准确计算括号中的参数，并不是这么简单。所以我先找到了这些系数的组成规律，然后用递推算法搞定了这些系数，并存在了 'weight_calculated' vector. 代码 line_67-88 的复杂结构就是为了实现这个功能所做。关于递推算法，我也懒得写了，线索可以看我留下的 important_image_2.jpg， 真有兴趣的朋友可以通过下面的方式联系我，当面讲，快。

在代码运行之后，可以观测到人数变化的动态曲线，以及在 console window 输出最终预测值。

Enjoy! :)


                                                                                                         yihaosun94@gmail.com
                                                                                                                    Yihao Sun
                                                                                                                   07.03.2020
